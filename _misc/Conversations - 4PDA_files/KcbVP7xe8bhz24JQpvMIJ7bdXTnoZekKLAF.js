(function(d,s,z){(function(a,g,d,l){var k,m;if("function"!=typeof a[g]||(k=1.01>a[g][g])){var h=function(){return a[g]||this};h.fn=h.prototype=h;h.constructor=h;h[g]=1.01;d&&(h[d]=1.01);var f=function(c,a,b){return function(){if(!c||c in h){for(var q=[],f=b.length;f;)q.unshift(h[b[--f]]);a.apply(h,q)}else c in e||(e[c]=[]),e[c].push([a,b])}},e=h.onInit=function(c,e){c=(c+"").split(/\s+/);for(var b=c.length,a=e;b;)a=new f(c[--b],a,c);a();return h};h.addModule=function(c,a){if(!(c in h)){h[c]=a?"function"==
typeof a?a(h):a:l;for(var b=0,q=e[c];q&&b<q.length;){for(var f=[],g=q[b][1].length;g;)f.unshift(h[q[b][1][--g]]);q[b++][0].apply(h,f)}delete e[c]}return h};h.replaceModule=function(c,a){c in h&&delete h[c];return h.addModule(c,a)};if(k){k=a[g];for(m in k)m in h||!k.propertyIsEnumerable(m)||(h[m]=k[m]);for(;"_"in k.onInit&&(m=k.onInit._.shift());)e.apply(a,m);for(;"_"in k.addModule&&(m=k.addModule._.shift());)h.addModule.apply(a,m)}a[g]=h;d&&(a[d]=h)}})(d,"lib4PDA","$4");var C=function(a){function g(){return!1}
function d(){return!0}function l(b){b||a.event;if(b[k])return b;b[k]=1;b[k+m]=b[m];b[k+h]=b[h];b[f]=g;b[e]=g;b[m]=function(){this[f]=d;if(this[k+m])this[k+m]();else this.returnValue=!1};b[h]=function(){this[e]=d;if(this[k+h])this[k+h]();else this.cancelBubble=!0};b.target||(b.target=b.srcElement||s);3===b.target.nodeType&&(b.target=b.target.parentNode);return b}var k="isFixed",m="preventDefault",h="stopPropagation",f="isDefaultPrevented",e="isPropagationStopped",c=0,n;Array.prototype.indexOf||(Array.prototype.indexOf=
function(b,c){c||(c=0);for(var a=c;a<this.length;a++)if(this[a]===b)return a;return-1});return a.jsEvent?a.jsEvent:n=a.jsEvent={add:function(b,f,g){f=(f+"").split(/\s+/);var v=0,d=f.length;if(1<d)for(;v<d;v++)f[v]&&n.add(b,f[v],g);else if(f=f[0])b.setInterval&&b!=a&&!b.frameElement&&(b=a),g.guid||(g.guid=++c),b.events||(b.events={},b.handle=function(c){l(c);for(var a in b.events[c.type])if(!1===b.events[c.type][a].call(b,c)&&(c[m](),c[h]()),c[e]())break}),b.events[f]||(b.events[f]={},b.addEventListener?
b.addEventListener(f,b.handle,!1):b.attachEvent?b.attachEvent("on"+f,b.handle):b["on"+f]=b.handle),b.events[f][g.guid]=g;return n},remove:function(b,c,a){c=(c+"").split(/\s+/);var e=0,f=c.length;if(1<f)for(;e<f;e++)c[e]&&n.add(b,c[e],a);else if(c=c[0]){var e=b.events&&b.events[c],g;if(e){delete e[a.guid];for(g in e)return n;b.removeEventListener?b.removeEventListener(c,b.handle,!1):b.detachEvent?b.detachEvent("on"+c,b.handle):b["on"+c]=d;delete b.events[c];for(g in b.events)return n;try{delete b.handle,
delete b.events}catch(h){b.removeAttribute("handle"),b.removeAttribute("events")}}}return n}}}(d),t=function(a,g){g&&g.querySelectorAll||(g=s);return g.querySelectorAll(a)},r=function(a,g){return(g=t(a,g))&&g.length?g[0]:z},y=function(a,g,d){C.add(a,g,d);return a},p=function(a,g){return a.className&&-1<(" "+a.className+" ").indexOf(" "+g+" ")},w=function(a,g){var d=" "+a.className+" ",d=p(a,g)?d.replace(" "+g+" "," "):d+g;a.className=d.replace(/(^\s+|\s+$)/g,"");return a};(function(a,g){var d=function(a,
f){return"padding:"+a+";margin:"+f+";"},l=function(){var a=r("#qrPopupWindowBackground"),f=r("#qrPopupWindowContent");a||(a=g.createElement("div"),a.id="qrPopupWindowBackground",a.setAttribute("style","display:none;"),a.onclick=function(){this.style.display="none";return!1},a.title="Нажмите для закрытия",g.body.appendChild(a));f||(f=g.createElement("div"),f.id="qrPopupWindowContent",f.setAttribute("style","width:auto;"+d("8px","0 auto")+"background:#FFF;z-index:65534;-webkit-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 0 10px 0 #000;box-shadow:0 0 10px 0 #000;"),
a.appendChild(f));return[a,f]},k=function(a){return'<img src="'+a+'" border="0" style="'+d(0,0)+'" align="middle">'},m=function(a){var f=l()[1];f.innerHTML=k("//s.4pda.to/KcbVIaNM6flq2AEieLZsJowBPSEwc6fhmMuC9ExOO4.gif");f.innerHTML=k("http://qrfree.kaywa.com/?l=1&s=8&d="+encodeURIComponent(a));l()[0].setAttribute("style","position:fixed;left:0;top:0;right:0;bottom:0;display:-webkit-flex;display:-ms-flex:display:none;background:rgba(0,0,0,.5);-ms-flex-align:center;-webkit-align-items:center;align-items:center;z-index:65533")};
a.jsShowQr=a.jsShowQr||m;a.jsParseQrForum=a.jsParseQrForum||function(){for(var h=t('.borderwrap .postcolor a:not([data-qr="false"])'),f=0,e,c,n,b;f<h.length;f++)if((c=(e=h[f]).getAttribute("href"))&&""!=c&&"#"!=c.substr(0,1)&&"java"!=c.substr(0,4)){n=g.createElement("img");n.alt=n.title="QR";n.setAttribute("style","border:0;vertical-align:middle;"+d(0,"0 3px")+"cursor:pointer");n.src="//s.4pda.to/KcbVIaNM6flq2AEieLZsJowBPSEwc6fhmMuC9ExOO4.gif";c=("//"==c.substr(0,2)?location.protocol:"")+c;b=c.split(":")[0];if("http"!=
b&&"https"!=b&&"market"!=b&&"magnet"!=b){var q=a.location.pathname,q="/"==c.substr(0,1)?"":-1==q.lastIndexOf("/")?"/":q.substr(0,q.lastIndexOf("/")+1);c=b+"://"+a.location.host+q+c}n.H=c;n.onclick=function(){m(this.H);return!1};e.parentNode.insertBefore(n,e)}}})(d,s);(function(a,g){if(!a.initPostBlock){var d=1,l=!1,k=function(a){var e,c;if(p(a,"open"))for(e=t(".block-body img[data-src]",a),c=0;c<e.length;c++)(a=e[c].getAttribute("data-src"))&&a!=e[c].src&&(e[c].src=a)},m=function(f){for(var e=p(f,
"open")?"open":"close",c="open"==e?"close":"open",n=t(".post-block.spoil."+e),b=n.length,q=0;q<b;q++){var d=n[q],h=e;p(d,h)&&(d.className=(" "+d.className+" ").replace(" "+h+" "," ").replace(/(^\s+|\s+$)/g,""));h=c;p(d,h)||(d.className=""+d.className+" "+h);k(d)}f.scrollIntoViewIfNeeded?f.scrollIntoViewIfNeeded():f.scrollIntoView?f.scrollIntoView():!0;try{g.selection.empty()}catch(l){}try{a.getSelection().removeAllRanges()}catch(m){}return!1},h=function(a){if(!a.isDefaultPrevented()){var e=a.target,
c;if("A"!=e.tagName||!e.hasAttribute("name")||!e.hasAttribute("title")||e.getAttribute("name")!=e.getAttribute("title")||e.hasAttribute("href")){for(;e&&e!=g&&!p(e,"block-title");)e=e.parentNode;if(e&&e!=g&&(c=e.parentNode)&&p(e,"block-title")&&p(c,"post-block")&&d){d=0;setTimeout(function(){d=1},300);if(p(c,"open")||p(c,"close"))return a.stopPropagation(),a.ctrlKey?a=m(c):(k(w(w(c,"close"),"open")),a=!1),a;if(p(c,"unbox")||p(c,"box"))return w(w(c,"unbox"),"box"),!1}}}};y(g,"click",h);y(g,"touchstart",
function(f){if(f.isDefaultPrevented()||l||1!=f.touches.length)l=!1;else{for(var e=f.target,c;e&&e!=g&&!p(e,"block-title");)e=e.parentNode;e&&e!=g&&(c=e.parentNode)&&p(e,"block-title")&&p(c,"post-block")&&d&&(l={t:f.touches[0],e:f.target,l:!1,s:a.pageYOffset||g.documentElement.scrollTop},setTimeout(function(){l.l=!0},300),setTimeout(function(){l=!1},1E3))}});y(g,"touchend",function(f){if(f.isDefaultPrevented()||!l||1!=f.changedTouches.length&&1!=f.touches.length||f.target!=l.e)l=!1;else{var e=f.changedTouches[0]||
f.touches[0],c=Math.sqrt(Math.pow(l.t.screenY-l.t.screenX-(e.screenY-e.screenX),2)),n=((l.t.radiusX+l.t.radiusY)/2+(e.radiusX+e.radiusY)/2)/2,e=f.target,b=a.pageYOffset||g.documentElement.scrollTop;n>c&&n>Math.sqrt(Math.pow(b-l.s,2))&&(e.fireEvent?g.createEventObject?(c=g.createEventObject(f),c.button=1,c.ctrlKey=l.l||f.ctrlKey||f.shiftKey,e.fireEvent("onclick",c)):e.fireEvent("onclick"):(c=g.createEvent("Events"),c.initEvent("click",!0,!1),c.ctrlKey=l.l||f.ctrlKey||f.shiftKey,e.dispatchEvent(c),
f.preventDefault()))}});a.initPostBlock=function(){var a,e,c,n,b=0,d=location.hash.replace(/^#/,"");try{a=t(".post-block.spoil.close .block-body img:not([data-src])");for(b=0;b<a.length;b++)c=a[b],c.setAttribute("data-src",c.src),c.src="";a=t("[data-post]");for(b=0;b<a.length;b++){c=a[b];e=c.getAttribute("data-post");n=t(".post-block.spoil",c);for(var u,v=0;v<n.length;v++)u="Spoil-"+e+"-"+(v+1),t('a[title="'+u+'"][name="'+u+'"]',n[v]).length||(c=g.createElement("a"),c.title=c.name=u,c.innerHTML="&nbsp;#&nbsp;",
c.setAttribute("style","float:right;margin-top:.3em;font-weight:900;text-decoration:none;cursor:pointer;position:static"),n[v].insertBefore(c,n[v].firstChild))}a=d&&g.getElementsByName(d)||[];for(b=0;b<a.length;b++){c=[];n=0;if("A"==a[b].tagName)for(e=a[b].parentNode;e&&e!=g.body&&!(n=/^post-main-\d+$/.test(e.id));)c.push(e),e=e.parentNode;if(n){for(;c.length;)e=c.pop(),p(e,"post-block")&&p(e,"close")&&(w(w(e,"close"),"open"),k(e));a[b].scrollIntoViewIfNeeded?a[b].scrollIntoViewIfNeeded():a[b].scrollIntoView?
a[b].scrollIntoView():!0}}}catch(l){}a=g.body||g.getElementsByTagName("body")[0];e=g.createElement("style");c=g.createElement("div");b=!1;e.type="text/css";c.className="checkPseudoSupport";a.appendChild(e);a.appendChild(c);e.styleSheet?e.styleSheet.cssText='.checkPseudoSupport{position:fixed;left:-100px;top:-100px;display:block;width:auto;height:auto} .checkPseudoSupport:before{content:"";display:block;height:50px}':e.appendChild(g.createTextNode('.checkPseudoSupport{position:fixed;left:-100px;top:-100px;display:block;width:auto;height:auto} .checkPseudoSupport:before{content:"";display:block;height:50px}'));
b=40<c.offsetHeight;a.removeChild(c);a.removeChild(e);if(!b)for(u="BLOCK",a=t(".post-block>.block-title"),b=0;b<a.length;b++)d=0,e=(c=a[b]).parentNode,n=!(c.innerHTML+"").replace(/(^\s+)|(\s+$)/g,""),p(e,"close")||p(e,"open")?(u="SPOILER",d=1):p(e,"box")||p(e,"unbox")?(u="CODE",d=1):p(e,"quote")?u="QUOTE":p(e,"hidden")&&(u="HIDE"),n&&(c.innerHTML=u),d&&y(a[b],"click",h)};"$4"in a&&$4.addModule("initPostBlock",function(){return a.initPostBlock})}})(d,s);(function(a,g){setTimeout(function(g,d,k,m){"CONFIG"in
a&&"tz"in a.CONFIG&&"baseurl"in a.CONFIG&&(g=new Date,d=-parseInt(g.getTimezoneOffset()/30),k=a.CONFIG.baseurl+"act=xmlout&do=tz-autoset&tz="+30*d,d!=2*parseFloat(a.CONFIG.tz)&&((m=function(a){try{return new XMLHttpRequest}catch(g){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(d){}return 0}())?(m.onreadystatechange=function(){4==this.readyState&&"success"!=this.responseText&&
(a.location=k)},m.open("GET",k+"&xml=1&_="+g.getTime()),m.send(null)):a.location=k))},1E3)})(d);(function(a,g){function d(e){return(e=a.cookie.match(RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(e[1]):z}function l(e,c,d){d=d||{};var b=d.expires;if("number"==typeof b&&b){var g=new Date;g.setTime(g.getTime()+1E3*b);b=d.expires=g}b&&b.toUTCString&&(d.expires=b.toUTCString());c=encodeURIComponent(c);e=e+"="+c;for(var f in d)e+="; "+f,c=d[f],!0!==c&&
(e+="="+c);a.cookie=e}function k(a){var c=!1;a+="";null!==a.match(/Windows Phone/i)&&null!==a.match(/Edge|Touch/i)?c="windows":null!==a.match(/iPhone|iPod/i)||a.match(/iPad/)?null!==a.match(/Safari/i)&&(null!==a.match(/CriOS/i)||6>g.Number(a.substr(a.indexOf("OS ")+3,3).replace("_",".")))&&(c="ios"):a.match(/\bSilk\/(.*\bMobile Safari\b)?/)||a.match(/\bKF\w/)||a.match("Kindle Fire")?c="kindle":null!==a.match(/Android/i)&&(c="android");return c}function m(){function e(a){for(var b=0;b<B;b++)if(m[b].getAttribute("name")==
a)return m[b];return!1}function c(b){var c="android"==b?"google-play-app":"ios"==b?"apple-itunes-app":"kindle"==b?"kindle-fire-app":"windows"==b?"msApplication-ID":!1,d={appId:!1,title:"",author:"",icon:"",price:"",type:!1};if(c){var f,n;if("windows"==b&&(u&&(f=e("msApplication-PackageEdgeName"))&&(d.appId=f.getAttribute("content")),!d.appId&&(f=e("msApplication-PackageEdgeName"))&&(d.appId=f.getAttribute("content")),!d.appId))return!1;if(f=e(c)){"windows"!=b&&(d.appId=/app-id=([^\s,]+)/.exec(f.getAttribute("content")))&&
(d.appId=d.appId[1]);if(!d.appId)return!1;d.title=f.getAttribute("data-title")||a.getElementsByTagName("title")[0].innerText.replace(/\s*[|\-·].*$/,"");d.author=f.getAttribute("data-author")||((n=e("author")).length?n.getAttribute("content"):g.location.hostname);d.icon=f.getAttribute("data-icon-url");d.price=f.getAttribute("data-price")}d.type=b}return d.appId?d:!1}function f(b){if(!a.getElementById("appbanner")){var c=b.icon,d,g;if(!c)for(d=a.getElementsByTagName("link"),g=0;g<d.length;g++)"apple-touch-icon-precomposed"==
d[g].getAttribute("rel")&&(c=d[g].getAttribute("href"));if(!c)for(g=0;g<d.length;g++)"apple-touch-icon"==d[g].getAttribute("rel")&&(c=d[g].getAttribute("href"));c||!(d=e("msApplication-TileImage"))&&!(d=e("msapplication-TileImage"))||(c=d.getAttribute("content"));d=function(){switch(this.type){case "android":return"market://details?id=";case "kindle":return"amzn://apps/android?asin=";case "windows":return u?"ms-windows-store://pdp/?productid=":"ms-windows-store:navigate?appid="}return"https://itunes.apple.com/ru/app/id"}.call(b)+
b.appId;g=(b.price?b.price:"FREE")+" - "+function(){switch(this.type){case "android":return"В Google Play";case "kindle":return"В Amazon Appstore";case "windows":return"В Windows Store"}return"В App Store"}.call(b);b='<div id="appbanner" class="'+r+(c?"":" no-icon")+'"><div class="ab-container"><a href="#" class="ab-close" data-ab-click="close">&times;</a><span class="ab-icon"'+(c?' style="background-image:url('+c+')"':"")+'></span><div class="ab-info"><strong>'+b.title+"</strong><span>"+b.author+
"</span><span>"+g+'</span></div><a href="'+d+'" class="ab-button" data-ab-click="view">Загрузить</a></div></div>';c=a.createElement("div");d=a.getElementsByTagName("body")[0];c.innerHTML=b;d.firstChild?d.insertBefore(c.firstChild,d.firstChild):d.appendChild(c.firstChild)}}function b(b){var c;!(b.isDefaultPrevented&&b.isDefaultPrevented()||b.isPropagationStopped&&b.isPropagationStopped())&&b.target&&(c=b.target.getAttribute("data-ab-click"))&&("view"==c&&l("ab-installed",1,{path:"/",expires:31536E3}),
"close"==c&&(l("ab-closed",1,{path:"/",expires:31536E3}),b.preventDefault(),b.stopPropagation()),c=a.getElementById("appbanner"))&&(c.style.display="none")}var q=navigator.userAgent+"",u=/Edge/i.test(q),v=navigator.standalone,m=a.getElementsByTagName("meta"),B=m.length,r=k(q);!r||v||d("ab-closed")||d("ab-installed")||d("sb-closed")||d("sb-installed")||(q=c(r))&&q.appId&&(f(q),h.add(a,"click",b))}if(!g["lib4pda-appInstall"]){g["lib4pda-appInstall"]=!0;var h=function(){function d(b){b=b||g.event;if(b.isFixed)return b;
b.isFixed=!0;b.preventDefault=b.preventDefault||function(){this.returnValue=!1};b.stopPropagation=b.stopPropagaton||function(){this.cancelBubble=!0};b.target||(b.target=b.srcElement);!b.relatedTarget&&b.fromElement&&(b.relatedTarget=b.fromElement==b.target?b.toElement:b.fromElement);if(null==b.pageX&&null!=b.clientX){var c=a.documentElement,e=a.body;b.pageX=b.clientX+(c&&c.scrollLeft||e&&e.scrollLeft||0)-(c.clientLeft||0);b.pageY=b.clientY+(c&&c.scrollTop||e&&e.scrollTop||0)-(c.clientTop||0)}!b.which&&
b.button&&(b.which=b.button&1?1:b.button&2?3:b.button&4?2:0);return b}function c(b){b=d(b);var a=this.events[b.type],c;for(c in a)!1===a[c].call(this,b)&&(b.preventDefault(),b.stopPropagation())}var f=0;return{add:function(b,a,d){b.setInterval&&b!=g&&!b.frameElement&&(b=g);d.guid||(d.guid="app"+ ++f);b.events||(b.events={},b.handle=function(a){if("undefined"!==typeof Event)return c.call(b,a)});b.events[a]||(b.events[a]={},b.addEventListener?b.addEventListener(a,b.handle,!1):b.attachEvent&&b.attachEvent("on"+
a,b.handle));b.events[a][d.guid]=d},remove:function(a,c,d){var e=a.events&&a.events[c];if(e){delete e[d.guid];for(var g in e)return;a.removeEventListener?a.removeEventListener(c,a.handle,!1):a.detachEvent&&a.detachEvent("on"+c,a.handle);delete a.events[c];for(g in a.events)return;try{delete a.handle,delete a.events}catch(f){a.removeAttribute("handle"),a.removeAttribute("events")}}}}}(),f=0,f=setInterval(function(){a.getElementsByTagName("body").length&&(clearInterval(f),m())},500)}})(s,d);if(!d["js-forum_helpers"]){d["js-forum_helpers"]=
1;var A=function(a){a=a||d.event;var g=!0,p=r('form[name="modform"]');if(!p)return g;var l=r('[name="tact"]',p);if(!l)return g;var k=r('[name="selectedtids"]',p),p=r('[name="selectedpids"]',p);if(!k&&!p)return g;"delete"==l.options[l.selectedIndex].value&&(g=confirm("Вы действительно хотите удалить выбранные элементы?"));if(!g)return!1;(l=d.localStorage||d.MozLocalStorage||d.WebkitLocalStorage)&&"removeItem"in l&&l.removeItem&&(l.removeItem("modpids-"+d.ipb_input_t),l.removeItem("modtids-"+d.ipb_input_f));
a&&("returnValue"in a&&(a.returnValue=g),!g&&"preventDefault"in a&&a.preventDefault());return g},x=function(){"undefined"===typeof d.XMLHttpRequest&&(d.XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(d){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}throw Error("This browser does not support XMLHttpRequest.");});var a=new d.XMLHttpRequest,g=[],p=[],l=[],k=0,m=0,h=function(){var c=new d.Function;
"onreadystatechange"in a&&(a.onreadystatechange=c);"onload"in a&&(a.onload=c);"onerror"in a&&(a.ontimeout=a.onload=c)},f=function(){4!=m&&(h(),a.abort())},e=function(c,d){for(d=0;d<c.length;d++)c[d](a)};a._abort=a.abort;a._open=a.open;a.abort=function(){k=1;a._abort()};a.open=function(c,d,b,e,g){a._open(c,d,"undefined"==typeof b?!0:b,e?e:null,g?g:null);a.setRequestHeader("X-Requested-With","XMLHttpRequest")};a.process=function(c,d,b){a.open(d?d:"GET",c);a.send("undefined"==b?null:b)};a.show_loading=
function(){var a=r("#loading-layer");try{a&&(a.style.display="block",a.style.position="absolute",a.style.left=parseInt((d.innerWidth-a.offsetWidth)/2+d.scrollX)+"px",a.style.top=parseInt((d.innerHeight-a.offsetHeight)/2+d.scrollY)+"px")}catch(e){}};a.hide_loading=function(){try{r("#loading-layer").style.display="none"}catch(a){}};d.document.namespaces&&d.attachEvent("onunload",f);"onreadystatechange"in a&&(a.onreadystatechange=function(){k?m=0:(m!=a.readyState&&4==a.readyState&&(h(),d.document.namespaces&&
d.detachEvent("onunload",f),200==a.status?e(g):e(p),e(l)),m=a.readyState)});"onload"in a&&(a.onload=function(){a.status=200;a.state=4;e(g);e(l);d.document.namespaces&&d.detachEvent("onunload",f)});"onerror"in a&&(a.onerror=a.ontimeout=function(){a.status=0;a.state=4;e(p);e(l);d.document.namespaces&&d.detachEvent("onunload",f)});a.done=function(c){"function"===typeof c&&(g.push(c),4==a.state&&200==a.status&&c(a));return a};a.fail=function(c){"function"===typeof c&&(p.push(c),4==a.state&&200!=a.status&&
c(a));return a};a.complete=function(c){"function"===typeof c&&(l.push(c),4==a.state&&c(a));return a};return a};(function(){function a(a,d){return a.getAttribute("data-"+d)}function g(a,d){var e=r('.borderwrap[data-post="'+a+'"]',d);e||(e=r('.borderwrap .ipbtable[data-post="'+a+'"]',d))||(e=r('#l5FdHwz1qFkplbHq [data-post="'+a+'"],l5FdHwz1qFkplbHq [data-post="'+a+'"]',d));return e}function p(){k=ipb_var_base_url;var h=k+"act=zmod&auth_key="+ipb_md5_check+"&",f=s.getElementById("se-mod-frm"),
e=function(){alert("Ошибка на сервере")};f&&(f.setAttribute("method","POST"),f.setAttribute("action",h+"&st="+ipb_var_st));d["--seMODpin"]=function(c,f,b){f=f||d.event;f.preventDefault&&f.preventDefault();f.returnValue=!1;var q=a(c,"pin");confirm("Вы действительно хотите "+("pinpost"==q?"закрепить":"открепить")+" данный пост?")&&(f=new x,f.show_loading(),f.done(function(e){if("ok"!=e.responseText)alert("Ошибка");else{"pinpost"==q?(c.innerHTML='<i class="icon-pin mid-icon"></i>',c.title="Закрепить",
c.setAttribute("data-pin","unpinpost")):(c.innerHTML='<i class="icon-unpin mid-icon"></i>',c.setAttribute("data-pin","pinpost"),h.title="Открепить");var f=r("#topic-pin-content");e=g(b);var h,n=0;!f&&(h=r("#l5FdHwz1qFkplbHq>.borderwrap>.maintitle~form>table")||r("#l5FdHwz1qFkplbHq>.borderwrap>.maintitle~.ddb-ft-wrap>.ddb-ft-cell")||r("#l5FdHwz1qFkplbHq>.borderwrap>.maintitle:first-child>table"))&&(h=h.parentNode,f=s.createElement("div"),f.id="topic-pin-content",h.parentNode.insertBefore(f,
h.nextSibling));if(e&&f)if("pinpost"==q){try{n=a(r("[data-post]:first-child",f),"post")}catch(l){}if(h=g(n)){e.parentNode.insertBefore(h,e.nextSibling);try{h=r('.pinlink[data-pin="unpinpost"]',h),h.setAttribute("data-pin","pinpost"),h.innerHTML='<i class="icon-unpin mid-icon"></i>',h.title="Открепить"}catch(m){}}f.appendChild(e)}else{h=f.parentNode;for(var f=t("[data-post]",h),n=r(".ddb-ft-wrap:first-child",h)||!1,k=0,p=a(e,"post");k<f.length&&!(f[k]!=e&&(n=f[k],a(f[k],"post")>p));k++);n&&f.length>
k?h.insertBefore(e,n):h.appendChild(e)}d.reinitToPinpost&&d.reinitToPinpost()}}).fail(e).complete(f.hide_loading),f.process(h+"p="+b+"&code="+a(c,"pin")))};d["--seMODhide"]=function(c,f,b){f=f||d.event;f.preventDefault&&f.preventDefault();f.returnValue=!1;var q=a(c,"approve");f=new x;f.show_loading();f.done(function(a){if("ok"!=a.responseText)alert("Ошибка");else{q="approve"==q?"unapprove":"approve";c.setAttribute("data-approve",q);var d=g(b);d&&(d.className=(d.className+"").replace(/(^|\s+)hidepin(\s+|$)/g,
" ").replace(/^\s+|\s+$/gm,""),"approve"==q?(d.className+=" hidepin",c.title="Опубликовать пост"):c.title="Скрыть пост");if(d=s.getElementById("post-main-"+b)){a="post"+(/(^|\s+)post2/.test(d.className+"")?2:1);for(var e=d,d=d.className,f=a+"shaded2 "+a,d=(d+"").split(" "),f=(f+"").split(" "),h=[],n=0;n<d.length;n++)h.push(-1<f.indexOf(d[n])?"":d[n]);d=h.join(" ").replace(/\s\s+/gm," ");e.className=d+a+("approve"==q?"shaded2":"")}}}).fail(e).complete(f.hide_loading);f.process(h+"code=postchoice&selectedpids="+
b+"&tact="+q)};d["--seMODdel"]=function(a,f,b){f=f||d.event;f.preventDefault&&f.preventDefault();f.returnValue=!1;confirm("Вы действительно хотите удалить это сообщение?")&&(a=new x,a.show_loading(),a.done(function(a){"ok"!=a.responseText?alert("Ошибка"):(a=g(b))&&a.parentNode.removeChild(a)}).fail(e).complete(a.hide_loading),a.process(h+"code=postchoice&tact=delete&selectedpids="+b))};d["--seMODres"]=function(a,f,b){f=f||d.event;f.preventDefault&&f.preventDefault();f.returnValue=!1;a=new x;a.show_loading();
a.done(function(a){if("ok"!=a.responseText)alert("Ошибка");else{var c=g(b);if(c){c.className=((c.className||"")+"").replace(/\bdeletedpost\b/,"");try{c.classList.remove("deletedpost");var e=c.querySelectorAll(".post2shaded,.post1shaded");for(a=0;a<e.length;a++)e[a].classList.contains("post2shaded")&&(e[a].classList.add("post2"),e[a].classList.remove("post2shaded")),e[a].classList.contains("post1shaded")&&(e[a].classList.add("post1"),e[a].classList.remove("post1shaded"));(new x).done(function(a){var d=
s.createElement("div");d.innerHTML=a.responseText;if(a=g(b,d))c.innerHTML=a.innerHTML}).process(d.location.href)}catch(f){}}}}).fail(e).complete(a.hide_loading);a.process(h+"code=postchoice&tact=restore-post&selectedpids="+b)}}function l(){var a=0,f=[],e,c=function(){a&&clearTimeout(a);d.checkdelete!==A&&(d.checkdelete=A)},g=function(a,b){var c,d=((localStorage.getItem("mod"+a+"-"+parseInt(b))||"")+"").split(","),f=[];for(e=0;e<d.length;e++)d[e]&&(f.push(d[e]),c=r('input[value="'+d[e]+'"][data-field="selected'+
a+'"]'))&&(c.checked=!0);return f},b=function(a,b){if(!parseInt(b)){for(var c=[],d=0,e="mod"+a+"-",f=e.length;d<localStorage.length;d++)(localStorage.key(d)+"").substr(0,f)==e&&c.push(localStorage.key(d));for(d=0;d<c.length;d++)localStorage.removeItem(c[d])}},k=function(a,b){return r('form[name="modform"] [name="CODE"][value="'+a+'"]~[name="'+b+'"]')};try{var l=k("postchoice","selectedpids"),m=k("topicchoice","selectedtids");localStorage&&localStorage.setItem&&(b("pids",d.ipb_input_t),b("tids",d.ipb_input_f),
f=g("pids",d.ipb_input_t),l&&(l.value=f.join(","),r('form[name="modform"] [name="gobutton"]').value=lang_gobutton+" ("+f.length+")"),f=g("tids",d.ipb_input_f),m&&(m.value=f.join(","),r('form[name="modform"] [name="gobutton"]').value=lang_gobutton+" ("+f.length+")"),a=setTimeout(c,300))}catch(p){}}var k="?";d.ipb||(d.ipb={});d.ipb.frmChkToggle=function(g,f){if(g){var e=r(a(g,"form")),c=r('[name="'+a(g,"field")+'"]',e),k=g.value+"",b=g.checked?1:0,l=a(g,"lskey"),m=a(g,"var");if(e&&c){var l=l?l+"":!1,
m=m&&d[m]?m:!1,p=(c.value+"").split(","),s=[],t;for(t=0;t<p.length;t++)p[t]&&p[t]!=k&&s.push(p[t]);b&&s.push(k);try{"undefined"!=typeof lang_gobutton&&(b=r('[name="gobutton"]',e))&&(b.value=lang_gobutton+" ("+s.length+")");var w=d.localStorage||d.MozLocalStorage||d.WebkitLocalStorage;m&&l&&w&&"setItem"in w&&w.setItem&&w.setItem(l+"-"+d[m],s.join(","))}catch(x){}c.value=s.join(",")}else f=f||d.event,f.preventDefault&&f.preventDefault(),f.returnValue=!1}else f=f||d.event,f.preventDefault&&f.preventDefault(),
f.returnValue=!1};var m=0,m=setInterval(function(){if(/int|com/.test(s.readyState)){if(!("SVGSVGElement"in d)){var a=s.getElementsByTagName("html");a.length&&(a[0].className=(a[0].className+" no-svg ").replace(/(^\s+)|(\s\s+)|(\s+$)/g," "))}m&&clearInterval(m);p();l()}},300)})();d.jsEvent.add(s,"click",function(a){if("A"==a.target.tagName&&a.target.hasAttribute("name")&&a.target.hasAttribute("title")&&a.target.getAttribute("name")==a.target.getAttribute("title")&&!a.target.hasAttribute("href")){for(var d=
a.target.parentNode;d&&d!=s&&!d.hasAttribute("data-post");)d=d.parentNode;if(d)return a.preventDefault(),prompt("Ссылка на якорь",location.protocol+"//4pda.ru/forum/index.php?act=findpost&pid="+d.getAttribute("data-post")+"&anchor="+a.target.getAttribute("name")),!1}})}})(window,document);
