function fbox_engine(){if(typeof(fbox_conf)!="function"){return;}var j,an;var ag,d,al;var n,A;var Z;var u=0;var o;var K,H;var R,V,am;var x,Q,aa;var G,O;var S,I,v;var T,l,ae;var aq;var ab;var ac=0,aj=0,f=0,ao=0;var t=false;var M=false;var p;var P=null;var ak="";var B,g;var N=false;var D=[];function Y(){return false;}function r(at){return;}function b(at){if(!at){return"";}at=at.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1");return(at);}function w(at){return document.getElementById(at);}function m(at){return document.createElement(at);}function k(av,au,at){if(av.addEventListener){av.addEventListener(au,at,false);return true;}if(av.attachEvent){av.detachEvent("on"+au,at);return av.attachEvent("on"+au,at);}return false;}function c(av,au,at){if(av.removeEventListener){av.removeEventListener(au,at,false);return true;}if(av.detachEvent){return av.detachEvent("on"+au,at);}return false;}function ar(ay){var aw=false;function at(){if(!aw){aw=true;ay();}}if(window.ActiveXObject){var au;var av=null;var ax;au=document.createElement("div");ax=function(){var az;az=false;try{au.doScroll("left");}catch(aA){az=true;}if(!az||aw){if(av){window.clearInterval(av);av=null;}au=null;at();}};av=window.setInterval(ax,30);}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",at,false);}}k(window,"load",at);}function F(){var at=document.documentElement;this.left=window.pageXOffset||(at&&at.scrollLeft)||K.scrollLeft;this.top=window.pageYOffset||(at&&at.scrollTop)||K.scrollTop;}function C(){var az=document.documentElement;var au,aB,ax;var ay,at,aC;var aA=0,aw=0;var av;au=az?az.clientHeight:0;aB=K.clientHeight?K.clientHeight:0;ax=window.innerHeight?window.innerHeight:0;ay=az?az.clientWidth:0;at=K.clientWidth?K.clientWidth:0;aC=window.innerWidth?window.innerWidth:0;if(au&&aB&&ax){if(au==aB){aA=aC;aw=ax;}else{if(aB<au){av=au;au=aB;aB=av;}if(at<ay){av=ay;ay=at;at=av;}aw=aB<=ax?aB:au;aA=at<=aC?at:ay;}}else{if(au){aA=ay;aw=au;}else{aA=at;aw=aB;}}this.width=aA;this.height=aw;}function ad(aw){var ax=null;var aA=0;var at=0;var az=null;function av(aD){if(aD>=100){aw.style.opacity="";aw.style.filter="";aw.style.display="";}else{if(aD<=0){aw.style.display="none";aw.style.opacity=0;aw.style.filter="alpha(opacity=0)";}else{aw.style.opacity=aD*0.01;aw.style.filter="alpha(opacity="+aD+")";aw.style.display="";}}}function ay(aE){var aD=ax?true:false;if(aD){window.clearInterval(ax);ax=null;}at=0;aE=aE-0;if(!isNaN(aE)){aA=aE;av(aE);}return aD;}function aB(){if(at===0){ay();}else{if((at>0&&aA>=az)||(at<0&&aA<=az)){ay();aA=az;}}av(aA);}function aC(){if((at>0&&aA<az)||(at<0&&aA>az)){av(aA);aA+=at;return true;}aB();return false;}function au(aG,aD,aF,aE){if(Z){ay(aD);return;}if(!ay()){aA=aG;}az=aD;at=aF;if(aC()){ax=window.setInterval(aC,aE);}}this.halt=ay;this.animate=au;this.redisplay=aB;}function h(av){if(!av){Q.innerHTML="";Q.style.overflow="hidden";return;}var au=null;if(P.type===0){var at=m("a");at.href="#";au=P.objImg;au.id="fbox_content_img";au.style.border="0px";at.appendChild(au);Q.appendChild(at);}else{if(P.type==3){av='<iframe src="'+P.src+'" id="fbox_content_iframe" frameborder="0" ></iframe>';}else{if(typeof(av)!="string"){av="";}}Q.innerHTML=av;if(P.type==3){au=w("fbox_content_iframe");}}Q.style.overflow="auto";if(au){au.style.width=P.width+"px";au.style.height=P.height+"px";}}function af(at){var aw,av,au,ax;for(av=0;av<D.length;av++){au=document.getElementsByTagName(D[av]);for(aw=0;aw<au.length;aw++){ax=au[aw];if(ax.fbox_doNotFixVisibility){continue;}if(at){ax.fbox_visibilty_backup=ax.style.visibility;ax.style.visibility="hidden";}else{ax.style.visibility=ax.fbox_visibilty_backup;}}}}function X(){var at=new C();var av,au;if(N){R.style.position="fixed";av=au=0;}else{var aw=new F();R.style.position="absolute";av=aw.left;au=aw.top;}R.style.left=av+"px";R.style.top=au+"px";R.style.width=at.width+"px";R.style.height=at.height+"px";B.redisplay();}function e(){B.halt(0);X();af(true);B.animate(0,77,10,70);u=u|2;}function U(){u=u&(~2);B.halt(0);af(false);}function J(){var at=new C();var av=(at.width-V.offsetWidth)>>1;var au=(at.height-V.offsetHeight)>>1;if(N){V.style.position="fixed";}else{var aw=new F();V.style.position="absolute";av=aw.left+av;au=aw.top+au;}V.style.left=av+"px";V.style.top=au+"px";}function y(){var aw=false;var ax=new F();var at=new C();x.style.display="";var av=(at.width-x.offsetWidth)>>1;var au=(at.height-x.offsetHeight)>>1;g.redisplay();if(N){if(av<=0||au<=0){aw=false;x.style.position="absolute";}else{aw=true;x.style.position="fixed";}}if(av<=0){if(!t){t=true;av=ax.left+av;if(av<0){av=0;}x.style.left=av+"px";}}else{t=false;if(!aw){av=ax.left+av;}x.style.left=av+"px";}if(au<=0){if(!M){M=true;au=ax.top+au;if(au<0){au=0;}x.style.top=au+"px";}}else{M=false;if(!aw){au=ax.top+au;}x.style.top=au+"px";}}function z(at){var aA=P.width;var au=P.height;var ax=b(P.title)?true:false;var ay=P.next||P.prev?true:false;var aC=false;if(!at){aC=ax||ay;}else{if(at==1){aC=true;}}if(aC&&aA<200){aA=200;}if(aC){aa.style.visibility="visible";aa.style.display="";G.style.visibility="visible";G.style.display="";if(ax){O.style.styleFloat=O.style.cssFloat="left";O.style.visibility="visible";O.style.height="auto";O.style.overflow="visible";T.style.marginTop=3+"px";}else{O.style.styleFloat=O.style.cssFloat="right";O.style.visibility="hidden";O.style.height=1+"px";O.style.overflow="hidden";T.style.marginTop=0+"px";}}else{aa.style.visibility="hidden";aa.style.display="none";G.style.visibility="hidden";G.style.display="none";}if(ay){if(P.prev){l.style.visibility="visible";}else{l.style.visibility="hidden";}if(P.next){ae.style.visibility="visible";}else{ae.style.visibility="hidden";}T.style.visibility="visible";T.style.display="";}else{T.style.visibility="hidden";T.style.display="none";}if(p){x.style.width=(aA+18)+"px";Q.style.width=(aA+6)+"px";Q.style.height=(au+6)+"px";}else{x.style.width=(aA+6)+"px";Q.style.width=aA+"px";Q.style.height=au+"px";}if(aC){aa.style.width=(aA+6)+"px";G.style.width=(aA+6)+"px";O.style.width="auto";x.style.height="auto";G.style.height="auto";x.style.display="";var az=S.offsetWidth;var av=O.offsetWidth;x.style.display="none";az=aA-az-25;var aB=az<=190?aA-10:az>av?av:az;O.style.width=aB+"px";x.style.display="";var aw=x.offsetHeight;x.style.display="none";aw=aw-12;x.style.height=aw+"px";G.style.height=aw-au-15+"px";}else{if(p){x.style.height=(au+18)+"px";}else{x.style.height=(au+6)+"px";}}y();}function E(){var aw=P.objImg;var ax=0;switch(P.imgType){case 0:var au=new C();var at=Math.max(au.width-125,200);var ay=Math.max(au.height-125,200);var av=Math.max(1,Math.max(P.exactImgWidth/at,P.exactImgHeight/ay));if(av>1){v.style.visibility="visible";v.style.display="";ab.style.visibility="visible";ab.style.display="";ax=1;}else{v.style.visibility="hidden";v.style.display="none";ab.style.visibility="hidden";ab.style.display="none";}if(P.imgState===0){v.innerHTML=d;P.width=aw.width=Math.round(P.exactImgWidth/av);P.height=aw.height=Math.round(P.exactImgHeight/av);}else{v.innerHTML=al;P.width=aw.width=P.exactImgWidth;P.height=aw.height=P.exactImgHeight;}break;case 1:P.height=aw.height=Math.round(P.exactImgHeight*P.width/P.exactImgWidth);aw.width=P.width;break;case 2:P.width=aw.width=Math.round(P.exactImgWidth*P.height/P.exactImgHeight);aw.height=P.height;break;case 3:aw.width=P.width;aw.height=P.height;}z(ax);}function a(){function av(){if((u&1)==1){c(window,"scroll",a);return;}if((u&8)==8){y();}if((u&2)==2){X();}if((u&4)==4){J();}var ax=new Date();var aw=ax.getTime();aj=aw;k(window,"scroll",a);var ay=new F();f=ay.left;ao=ay.top;}c(window,"scroll",a);var au=new Date();var at=au.getTime()-aj;if(at>=200){av();}else{window.setTimeout(av,200-at);}}function ap(){var av=new F();if(Math.abs(av.left-f)>50||Math.abs(av.top-ao>50)){if((u&8)==8){y();}if((u&2)==2){X();}if((u&4)==4){J();}f=av.left;ao=av.top;var au=new Date();var at=au.getTime();aj=at;}}function ah(){function av(){if((u&1)==1){c(window,"resize",ah);return;}R.style.display="none";x.style.display="none";if((u&8)==8){if(P.imgType===0){h(false);E();h(true);}else{y();}}if((u&2)==2){X();}if((u&4)==4){J();}var ax=new Date();var aw=ax.getTime();aj=ac=aw;k(window,"resize",ah);var ay=new F();f=ay.left;ao=ay.top;}c(window,"resize",ah);var au=new Date();var at=au.getTime()-ac;if(at>=200){av();}else{window.setTimeout(av,200-at);}}function W(){u=u&(~4);V.style.display="none";V.onclick=null;}function s(){u=u|1;g.halt(0);if(o){o.onreadystatechange=Y;}if(P.objImg){P.objImg.onload=null;if(!P.imgReadyTest){P.objImg.src=null;P.objImg=null;}}if((u&4)==4){W();}u=u&(~8);if((u&2)==2){U();}x.style.display="none";h(false);c(window,"resize",ah);c(window,"scroll",a);c(window,"scroll",ap);if(typeof(K.style.cssText)!="undefined"){K.style.cssText=ak;}else{K.setAttribute("style",ak);}return false;}function i(){V.style.display="";J();V.onclick=s;u=u|4;}function q(){if(((u&8)==8)&&(P.imgType===0)){P.imgState=P.imgState?0:1;h(false);E();h(true);if((u&2)==2){X();}}return false;}function ai(au){function aw(){ai(P.next);return false;}function av(){ai(P.prev);return false;}if(!au||(typeof(au)!="object")){return;}if(P&&(typeof(P)=="object")&&P.objImg&&(typeof(P.objImg)=="object")){P.objImg.id=null;}P=au;var at=P.src;K.style.width="auto";K.style.height="auto";t=M=false;f=0;ao=0;v.style.visibility="hidden";v.style.display="none";ab.style.visibility="hidden";ab.style.display="none";h(false);var ax=b(P.title);if(!ax||ax=="."){ax="&nbsp;";}O.innerHTML=ax;ax=null;g.halt(0);u=u&2;if((u&2)===0){e();}ah();a();if(!N){k(window,"scroll",ap);}if(P.type===0||P.type==2){i();}if(P.type===0){Q.onclick=s;v.onclick=q;}else{Q.onclick=null;v.onclick=Y;}l.onclick=P.prev?av:Y;ae.onclick=P.next?aw:Y;switch(P.type){case 0:var ay=function(){var aC=P.imgReadyTest;P.imgReadyTest=true;if((u&1)!=1){W();if(!aC){P.exactImgWidth=P.objImg.width;P.exactImgHeight=P.objImg.height;}E();h(true);if(aC){g.animate(0,100,25,20);}else{g.animate(0,100,10,35);}u=u|8;}};if(P.imgReadyTest){ay();}else{var aB=new Image();P.objImg=aB;aB.onload=function(){this.onload=null;this.onerror=null;ay();};aB.onerror=function(){this.onerror=null;s();};aB.src=at;}break;case 1:z(1);var az=P.tagContent.innerHTML;h(az);g.animate(0,100,10,30);u=u|8;break;case 2:try{o.open("GET",at,true);}catch(aA){P.tagLink.onclick=Y;s();break;}o.onreadystatechange=function(){if((u&1)==1){o.onreadystatechange=Y;o.abort();}else{if(o.readyState==4){o.onreadystatechange=Y;if(o.status==200||!o.status){W();z(1);var aC=o.responseText;h(aC);g.animate(0,100,10,30);u=u|8;}else{P.tagLink.onclick=Y;s();}}}};o.send(null);break;case 3:z(1);h(true);g.animate(0,100,10,30);u=u|8;}}function L(){if(w("fbox_world")){return;}o=null;try{if(window.XMLHttpRequest){o=new XMLHttpRequest();}else{if(window.ActiveXObject){o=new ActiveXObject("Microsoft.XMLHTTP");}}}catch(ay){}var aw=new fbox_conf();Z=aw.disable_fadin;j=aw.progress_src;ag=aw.close_txt;n=aw.prev_txt;A=aw.next_txt;d=aw.max_txt;al=aw.min_txt;an="";for(var au=0;au<aw.nbsp_count;au++){an+="&nbsp;";}var ax='<div id="fbox_bg" style="display:none;"></div><div id="fbox_progress" style="display:none;"></div><div id="fbox_fg" style="display:none;"><div id="fbox_fg_inner"><div id="fbox_content"></div><div id="fbox_spacer"></div><table id="fbox_bar" border="0" cellspacing="0" cellpadding="0"><tr><td><div id="fbox_sys"><nobr><a id="fbox_resize_a" href="#" >'+d+'</a><span id="fbox_resize_nbsp" >'+an+'</span><a id="fbox_close_a" href="#" >'+ag+'</a></nobr></div><div id="fbox_title">&nbsp;</div><div id="fbox_navig"><nobr><a id="fbox_prev_a" href="#" >'+n+"</a>"+an+'<a id="fbox_next_a" href="#" >'+A+"</a></nobr></div></td></tr></table></div></div>";H=document.createElement("div");H.setAttribute("id","fbox_world");H.innerHTML=ax;K=document.getElementsByTagName("body")[0];K.appendChild(H);ak=typeof(K.style.cssText)!="undefined"?K.style.cssText:K.getAttribute("style");R=w("fbox_bg");V=w("fbox_progress");x=w("fbox_fg");Q=w("fbox_content");aa=w("fbox_spacer");G=w("fbox_bar");O=w("fbox_title");S=w("fbox_sys");I=w("fbox_close_a");v=w("fbox_resize_a");T=w("fbox_navig");l=w("fbox_prev_a");ae=w("fbox_next_a");aq=w("fbox_fg_inner");ab=w("fbox_resize_nbsp");I.onclick=s;g=new ad(x);B=new ad(R);Q.style.visibility="hidden";x.style.width=100+"px";Q.style.width="auto";x.style.left=-200+"px";x.style.top=-200+"px";x.style.display="";p=Q.offsetWidth<100;x.style.display="none";Q.style.visibility="visible";x.style.left=0+"px";x.style.top=0+"px";N=!p;if(window.ActiveXObject&&!window.XMLHttpRequest){N=false;}am=new Image();var at=false;am.onload=function(){this.onload=null;this.onerror=null;this.style.width=this.width+"px";this.style.height=this.height+"px";this.style.border="0px";if(!at){at=true;V.appendChild(this);}};am.onerror=function(){this.onerror=null;if(!at){at=true;V.appendChild(this);}};am.src=j;D=["select","object","embed"];var av=[];function aA(aQ){var aN=this;this.tagLink=aQ.parentNode;this.title=aQ.getAttribute("title");var aC=b(aQ.getAttribute("src"));if(!aC){aC=b(this.tagLink.getAttribute("href"));}this.src=aC;this.type=3;var aO=b(aQ.getAttribute("type")).toLowerCase();switch(aO){case"image":this.type=0;break;case"inline":this.type=1;break;case"ajax":this.type=2;break;case"iframe":this.type=3;break;default:if(aC.indexOf("#")>=0){this.type=1;break;}var aF=aC.lastIndexOf(".");if(aF<1){break;}var aG=aC.substr(aF+1,aC.length).toLowerCase();if(aG=="jpg"||aG=="jpeg"||aG=="png"||aG=="gif"){this.type=0;}}this.tagContent=null;if(this.type==1){var aI=aC.substr(aC.indexOf("#")+1,1000);this.tagContent=w(aI);if(this.tagContent){var aL,aK,aE;for(aK=0;aK<D.length;aK++){aE=this.tagContent.getElementsByTagName(D[aK]);for(aL=0;aL<aE.length;aL++){aE[aL].fbox_doNotFixVisibility=true;}}}else{this.type=-1;}}if(this.type==2&&!o){this.type=-1;}this.objImg=null;this.imgType=-1;this.exactImgWidth=0;this.exactImgHeight=0;this.imgState=-1;this.imgReadyTest=false;this.width=aQ.getAttribute("width")-0;this.height=aQ.getAttribute("height")-0;if(this.type===0){this.imgType=0;if(this.width&&this.width>0){this.imgType+=1;}else{this.width=200;}if(this.height&&this.height>0){this.imgType+=2;}else{this.height=150;}this.imgState=this.imgType?1:0;if(!b(this.title)){var aM=this.tagLink.getElementsByTagName("img");if(aM[0]){var aJ=aM[0].getAttribute("title");if(b(aJ)){this.title=aJ;}}}}else{if(!this.width){this.width=400;}if(!this.height){this.height=300;}}this.next=null;this.prev=null;var aD=b(aQ.getAttribute("name")).toLowerCase();if(aD&&this.type!=-1){if(av[aD]){var aH=av[aD].length;this.prev=av[aD][aH-1];this.prev.next=this;av[aD][aH]=this;}else{av[aD]=[];av[aD][0]=this;}}function aP(){ai(aN);return false;}this.tagLink.onclick=this.type==-1?Y:aP;}var az=document.getElementsByTagName("span");for(au=0;au<az.length;au++){var aB=az[au];if(aB.className=="frontbox"&&aB.parentNode.nodeName.toLowerCase()=="a"){r(new aA(aB));}}}ar(L);}fbox_engine();